{% extends 'base.html' %}

{% block content %}
    <h2>{% block title %} {{ objective.objective_name }} {% endblock %}</h2>

    <p>
        <i>Found in <a href="{{ url_for('get_room', room_id=room.room_id)}}">{{ room.room_name }}</a></i></br>
        <table><tbody>
            <tr><td width="20%">ID</td> <td width="80%">{{ objective.objective_id }}</td></tr>
            <tr><td>Title</td> <td>{{ objective.objective_title }}</td></tr>
            <tr><td>Difficulty</td> <td>{{ objective.difficulty }}</td></tr>
            <tr><td>URL</td> <td>{{ objective.objective_url }}</td></tr>
            <tr><td>Supported by</td> <td>{{ objective.supported_by }}</td></tr>
            <tr><td>Requires</td> <td>{{ objective.requires }}</td></tr>
            <tr><td colspan="2">{{ objective.objective_desc }}</td></tr>
        </tbody></table>
    </p>

    <p>
        <img src="{{ objective.objective_img if (objective.objective_img!='') else '/static/not_found.jpg' }}" alt="Objective Image" width="33%" height="33%">
    </p>

    <br><hr><br>

    <p>
        <h4>Master Quest</h4>
        {{ mdquest|safe }}
    </p>

    <br><hr><br>

    <p>
        <h4>Public Solutions</h4>
        <ul>
            {% if world.visible == 1 %}
                {% for solution in solutions %}
                <li><a href="{{ url_for('get_solution', solution_id=solution.solution_id)}}">Solution</a> created by <a href="{{ url_for('get_creator', creator_id=solution.creator_id)}}">{{ creatorall[solution.solution_id] }}</a>, votes: {{ votingall[solution.solution_id] }}</li>
                {% endfor %}
            {% else %}
                Solutions are not visible as this world is not public currently.
            {% endif %}
        </ul>
    </p>

    <br><hr><br>

    <p>
        <h4>Edit Data</h4>
        {% if current_user.creator_id == world.creator_id %}
        <form action="{{ url_for('get_quest', objective_id=objective.objective_id)}}">
            <input type="submit" value="Edit Master Quest" />
        </form>
        {% endif %}
        {% if current_user.creator_role == "creator" or current_user.creator_role == "user" %}
        <form action="{{ url_for('get_mysolution', objective_id=objective.objective_id)}}">
            <input type="submit" value="Edit My Solution" />
        </form>
        {% endif %}
    </p>

    <p>
        <a href="{{ url_for('get_objectives', world_id=objective.world_id) }}">All Objectives</a>
    </p>
{% endblock %}
